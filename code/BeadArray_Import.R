#!/usr/bin/env Rscript

#------------------------------------------------------------------------------------------------------------------
# Parse the arguments
#------------------------------------------------------------------------------------------------------------------

args <- commandArgs(trailingOnly = TRUE) # get command-line arguments
dirname <- toString(head(args, 1))       # first command-line argument as a string

#------------------------------------------------------------------------------------------------------------------
# Load libraries
#------------------------------------------------------------------------------------------------------------------
suppressMessages(library(beadarray))

#------------------------------------------------------------------------------------------------------------------
# Load the array into the data variable 
#------------------------------------------------------------------------------------------------------------------

data <- readIllumina(dir=dirname, useImages=FALSE, illuminaAnnotation="Humanv4")

#------------------------------------------------------------------------------------------------------------------
# Run a basic check
#------------------------------------------------------------------------------------------------------------------

getBeadData(data, array=1, what="Grn")[1:10]
