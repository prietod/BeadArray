#!/usr/bin/env python

from pprint import pprint
import sys

files = sys.argv[1:]

data = {}

headers = []

for filename in files:
    with open(filename) as f:
        header = f.readline()
        headers.append(header.rstrip().split('\t'))

        for line in f.readlines():
            columns = line.rstrip().split('\t')
            primary_key = columns[0]
            values = columns[1:]

            if primary_key not in data:
                data[primary_key] = []

            data[primary_key].append(values)


# print re-oriented header

line = [ str(headers[file][column]) for column in range(12) for file in range(4) ]
line.insert(0, 'Probe_ID')
print('\t'.join(line))

# print re-oriented values

for k in sorted(data.iterkeys()):
    try:
        line = [ str(data[k][file][column]) for column in range(12) for file in range(4) ]
        line.insert(0, k)
        print('\t'.join(line))
    except:
        sys.stderr.write('error\n')
        sys.stderr.write(k + '\n')
        sys.exit(1)
