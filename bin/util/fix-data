#!/usr/bin/env python

from pprint import pprint
import fileinput
import sys

data = {}

headers = []

for filename in fileinput.input():
    with open(filename) as f:
        header = f.readline()
        headers.append(header.rstrip().split('\t'))

        for line in f.readlines():
            columns = line.rstrip().split('\t')
            primary_key = columns[0]
            values = columns[1:]

            if primary_key not in data:
                data[primary_key] = []

            data[primary_key].append(values)

# print re-oriented header

num_cols = len(headers[0])

line = [ str(headers[file][column]) for column in range(num_cols) for file in range(4) ]
line.insert(0, 'Probe_ID')
print('\t'.join(line))


# print re-oriented values

for k in sorted(data.iterkeys()):
    try:
        number_cols = len(data[k][file])
        line = [ str(data[k][file][column]) for column in range(num_cols) for file in range(4) ]
        line.insert(0, k)
        print('\t'.join(line))
    except:
        sys.stderr.write('Error: Key: ' + k )
        sys.exit(1)
