#!/usr/bin/env bash

MYDIR=$(readlink -f $(dirname $0))
MYBASE=$(readlink -f $MYDIR/..)

case $1 in
  subject_id) field=1;;
  vial_barcode_number) field=2;;
  Test_Name) field=3;;
  Donor_Number) field=4;; 
  Box) field=5;; 
  Row) field=6;; 
  Chip_Barcode) field=7;; 
  Array) field=8;;
  draw_dte) field=9;;
  sample_status) field=10;;
  Date_Received_Sample) field=11;;
  Date_of_Evaluation) field=12;; 
  Comments) field=13;;

  *) echo "Usage: $( basename $0) <subject_id|vial_barcode_number|Test_Name|Donor_Number|Box|Row|Chip_Barcode|Array|draw_dte|sample_status|Date_Received_Sample|Date_of_Evaluation|Comments>" 1>&2; echo 1>&2; exit 1;; 

esac

shift


if [[ $1 == '-u' ]]; then
  awk -F: "{print \$$field }" $MYBASE/tmp/run/map_info.csv | sort -u
else
  awk -F: "{print \$$field }" $MYBASE/tmp/run/map_info.csv 
fi
